#!/usr/bin/env ruby

Dir.chdir(File.split(__FILE__)[0])

# build extension
load 'ext/Rakefile'

##########################
#
# Gems
##

require 'rubygems'
require 'rake/gempackagetask.rb'

DATA_FILES=Dir["data/**/*"].select{|file|not (file=~/svn/ or file=~/xcf/ or file=~/\.svg/)}
PKG_FILES=Dir["ruby/**/*.rb"]+Dir["*.rb"]+DATA_FILES+Dir["build/*.rb"]+Dir["build/*/*.rb"] # +$BOA_LIBRARIES

  spec = Gem::Specification.new do |s|
    s.platform = Gem::Platform::LINUX_586
    s.summary = "A real-time strategy game."
    s.name = 'antargis-linux'
    s.version = PKG_VERSION
    s.requirements << 'none'
    #s.require_path = 'lib'
		s.require_paths << 'ext'
    s.autorequire = 'rake'
    s.files = PKG_FILES
		s.bindir="." #File.join("build","bin")
		s.executables << "antargis"
		#s.extensions=
    s.description = <<EOF
Battles of Antargis is a medieval-like realtime strategy game. 
You are a hero who was betrayed and you have to unify the kingdom 
and rebuild the old empire. Old myths will pass your way.
Its gameplay is very similar to that of Powermonger.
EOF
  end

  Rake::GemPackageTask.new(spec) do |pkg|
    pkg.need_zip = true
    pkg.need_tar = true
  end


